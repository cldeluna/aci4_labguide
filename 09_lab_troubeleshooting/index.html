


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ACI Version 4 Lab Guide">
      
      
        <link rel="canonical" href="https://github.com/cldeluna/aci4_labguide.git/09_lab_troubeleshooting/">
      
      
        <meta name="author" content="Claudia de Luna">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.1.6">
    
    
      
        <title>Lab 09 - Troubleshooting - ACI 4 Lab Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b9ffd7b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.b79bcd20.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-XXXXXXXX-X","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-09-aci-troubleshooting-tools" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://github.com/cldeluna/aci4_labguide.git" title="ACI 4 Lab Guide" class="md-header-nav__button md-logo" aria-label="ACI 4 Lab Guide">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ACI 4 Lab Guide
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Lab 09 - Troubleshooting
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/cldeluna/aci4_labguide.git/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cldeluna/aci4_labguide
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://github.com/cldeluna/aci4_labguide.git" title="ACI 4 Lab Guide" class="md-nav__button md-logo" aria-label="ACI 4 Lab Guide">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ACI 4 Lab Guide
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/cldeluna/aci4_labguide.git/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cldeluna/aci4_labguide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../topology/" title="Topology & Design" class="md-nav__link">
      Topology & Design
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../lab_access/" title="Getting Around the Lab" class="md-nav__link">
      Getting Around the Lab
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01_lab_fabric_discovery/" title="Lab 01 - Fabric Discovery" class="md-nav__link">
      Lab 01 - Fabric Discovery
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../02_lab_fabric_access_policies/" title="Lab 02 - Fabric & Access Policies" class="md-nav__link">
      Lab 02 - Fabric & Access Policies
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03_lab_tenant_constructs/" title="Lab 03 - Tenants" class="md-nav__link">
      Lab 03 - Tenants
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04_lab_layer2_connectivity/" title="Lab 04 - Host & Layer 2 Connectivity" class="md-nav__link">
      Lab 04 - Host & Layer 2 Connectivity
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../05_lab_vmm_integration/" title="Lab 05 - Integration with VMware ESXi" class="md-nav__link">
      Lab 05 - Integration with VMware ESXi
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../06_lab_layer3_connectivity/" title="Lab 06 - External Layer 3 Connectivity" class="md-nav__link">
      Lab 06 - External Layer 3 Connectivity
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../07_lab_operations/" title="Lab 07 - Management & Operations" class="md-nav__link">
      Lab 07 - Management & Operations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../08_lab_fwl_integration/" title="Lab 08 - Firewall Integration" class="md-nav__link">
      Lab 08 - Firewall Integration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab 09 - Troubleshooting
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Lab 09 - Troubleshooting" class="md-nav__link md-nav__link--active">
      Lab 09 - Troubleshooting
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-goal" class="md-nav__link">
    Lab Goal
  </a>
  
    <nav class="md-nav" aria-label="Lab Goal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-familiarize-yourself-with-aci-troubleshooting-apic-gui-tools" class="md-nav__link">
    Step 1 - Familiarize yourself with ACI Troubleshooting APIC (GUI) tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-familiarize-yourself-with-aci-troubleshooting-apic-cli-tools" class="md-nav__link">
    Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools
  </a>
  
    <nav class="md-nav" aria-label="Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-21-overview-of-acidiag-command" class="md-nav__link">
    Step 2.1 Overview of acidiag command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-22-overview-of-moquery-command" class="md-nav__link">
    Step 2.2 Overview of moquery command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-23-overview-of-iping-command" class="md-nav__link">
    Step 2.3 Overview of iping command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-24-overview-of-notable-show-commands" class="md-nav__link">
    Step 2.4 Overview of notable show commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-25-overview-of-icurl-command" class="md-nav__link">
    Step 2.5 Overview of icurl command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-26-mention-of-the-mobrowser-command-now-deprecated" class="md-nav__link">
    Step 2.6 Mention of the mobrowser command (now deprecated)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-27-mention-of-the-attach-and-fabric-commands-now-deprecated" class="md-nav__link">
    Step 2.7 Mention of the attach and fabric commands (now deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-explore-the-aci-object-store-browser-visore" class="md-nav__link">
    Step 3 - Explore the ACI Object Store Browser (Visore)
  </a>
  
    <nav class="md-nav" aria-label="Step 3 - Explore the ACI Object Store Browser (Visore)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-31-log-in-to-visore-the-aci-object-store-browser" class="md-nav__link">
    Step 3.1 - Log in to Visore , the ACI Object Store Browser
  </a>
  
    <nav class="md-nav" aria-label="Step 3.1 - Log in to Visore , the ACI Object Store Browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-url" class="md-nav__link">
    Direct URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-gui" class="md-nav__link">
    Via GUI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-32-search-for-a-class" class="md-nav__link">
    Step 3.2 - Search for a Class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-33-search-objects-by-properties-attributes" class="md-nav__link">
    Step 3.3 - Search Objects by Properties (Attributes)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-34-search-for-specific-objects-by-distinguished-name-dn" class="md-nav__link">
    Step 3.4 - Search for specific objects by Distinguished Name (DN)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-35-search-for-specific-objects-by-uid" class="md-nav__link">
    Step 3.5 - Search for specific objects by UID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-36-drill-down-the-object-tree" class="md-nav__link">
    Step 3.6 - Drill down the Object Tree
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-explore-the-cli-based-aci-object-store-browser" class="md-nav__link">
    Step 4 - Explore the CLI based ACI Object Store Browser
  </a>
  
    <nav class="md-nav" aria-label="Step 4 - Explore the CLI based ACI Object Store Browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-41-ssh-to-apic-and-explore-the-moquery-command" class="md-nav__link">
    Step 4.1 - SSH to APIC and explore the moquery command
  </a>
  
    <nav class="md-nav" aria-label="Step 4.1 - SSH to APIC and explore the moquery command">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-example" class="md-nav__link">
    Output Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-32-search-for-a-class_1" class="md-nav__link">
    Step 3.2 - Search for a Class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-33-search-objects-by-properties-attributes_1" class="md-nav__link">
    Step 3.3 - Search Objects by Properties (Attributes)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-34-search-for-specific-objects-br-distinguished-name-dn" class="md-nav__link">
    Step 3.4 - Search for specific objects br Distinguished Name (DN)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-35-search-for-specific-objects-by-uid_1" class="md-nav__link">
    Step 3.5 - Search for specific objects by UID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-information" class="md-nav__link">
    Reference Information
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../10_lab_programmability/" title="Lab 10 - Programmability" class="md-nav__link">
      Lab 10 - Programmability
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../11_lab_appcenter/" title="Lab 11 - App Center and ACI Optimize Feature" class="md-nav__link">
      Lab 11 - App Center and ACI Optimize Feature
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../12_lab_techsupport/" title="Lab 12 - Export Tech Support" class="md-nav__link">
      Lab 12 - Export Tech Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-goal" class="md-nav__link">
    Lab Goal
  </a>
  
    <nav class="md-nav" aria-label="Lab Goal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-familiarize-yourself-with-aci-troubleshooting-apic-gui-tools" class="md-nav__link">
    Step 1 - Familiarize yourself with ACI Troubleshooting APIC (GUI) tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-familiarize-yourself-with-aci-troubleshooting-apic-cli-tools" class="md-nav__link">
    Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools
  </a>
  
    <nav class="md-nav" aria-label="Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-21-overview-of-acidiag-command" class="md-nav__link">
    Step 2.1 Overview of acidiag command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-22-overview-of-moquery-command" class="md-nav__link">
    Step 2.2 Overview of moquery command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-23-overview-of-iping-command" class="md-nav__link">
    Step 2.3 Overview of iping command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-24-overview-of-notable-show-commands" class="md-nav__link">
    Step 2.4 Overview of notable show commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-25-overview-of-icurl-command" class="md-nav__link">
    Step 2.5 Overview of icurl command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-26-mention-of-the-mobrowser-command-now-deprecated" class="md-nav__link">
    Step 2.6 Mention of the mobrowser command (now deprecated)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-27-mention-of-the-attach-and-fabric-commands-now-deprecated" class="md-nav__link">
    Step 2.7 Mention of the attach and fabric commands (now deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-explore-the-aci-object-store-browser-visore" class="md-nav__link">
    Step 3 - Explore the ACI Object Store Browser (Visore)
  </a>
  
    <nav class="md-nav" aria-label="Step 3 - Explore the ACI Object Store Browser (Visore)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-31-log-in-to-visore-the-aci-object-store-browser" class="md-nav__link">
    Step 3.1 - Log in to Visore , the ACI Object Store Browser
  </a>
  
    <nav class="md-nav" aria-label="Step 3.1 - Log in to Visore , the ACI Object Store Browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-url" class="md-nav__link">
    Direct URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-gui" class="md-nav__link">
    Via GUI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-32-search-for-a-class" class="md-nav__link">
    Step 3.2 - Search for a Class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-33-search-objects-by-properties-attributes" class="md-nav__link">
    Step 3.3 - Search Objects by Properties (Attributes)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-34-search-for-specific-objects-by-distinguished-name-dn" class="md-nav__link">
    Step 3.4 - Search for specific objects by Distinguished Name (DN)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-35-search-for-specific-objects-by-uid" class="md-nav__link">
    Step 3.5 - Search for specific objects by UID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-36-drill-down-the-object-tree" class="md-nav__link">
    Step 3.6 - Drill down the Object Tree
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-explore-the-cli-based-aci-object-store-browser" class="md-nav__link">
    Step 4 - Explore the CLI based ACI Object Store Browser
  </a>
  
    <nav class="md-nav" aria-label="Step 4 - Explore the CLI based ACI Object Store Browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-41-ssh-to-apic-and-explore-the-moquery-command" class="md-nav__link">
    Step 4.1 - SSH to APIC and explore the moquery command
  </a>
  
    <nav class="md-nav" aria-label="Step 4.1 - SSH to APIC and explore the moquery command">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-example" class="md-nav__link">
    Output Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-32-search-for-a-class_1" class="md-nav__link">
    Step 3.2 - Search for a Class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-33-search-objects-by-properties-attributes_1" class="md-nav__link">
    Step 3.3 - Search Objects by Properties (Attributes)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-34-search-for-specific-objects-br-distinguished-name-dn" class="md-nav__link">
    Step 3.4 - Search for specific objects br Distinguished Name (DN)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-35-search-for-specific-objects-by-uid_1" class="md-nav__link">
    Step 3.5 - Search for specific objects by UID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-information" class="md-nav__link">
    Reference Information
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cldeluna/aci4_labguide.git/edit/master/docs/09_lab_troubeleshooting.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="lab-09-aci-troubleshooting-tools">Lab 09 ACI Troubleshooting Tools<a class="headerlink" href="#lab-09-aci-troubleshooting-tools" title="Permanent link">&para;</a></h1>
<p>ACI supports both GUI and CLI based tools.</p>
<p>Its important to note that the CLI tools are essentially an overlay which simulates NX-OS along with commands specific to the ACI environment.</p>
<h2 id="lab-goal">Lab Goal<a class="headerlink" href="#lab-goal" title="Permanent link">&para;</a></h2>
<p>Step 1 - Familiarize yourself with ACI Troubleshooting APIC (GUI) tools</p>
<p>Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools</p>
<p>Step 3 - Explore the ACI Object Store Browser (Visore)</p>
<p>Step 4 - Explore the CLI based ACI Object Store Browser  </p>
<h4 id="step-1-familiarize-yourself-with-aci-troubleshooting-apic-gui-tools">Step 1 - Familiarize yourself with ACI Troubleshooting APIC (GUI) tools<a class="headerlink" href="#step-1-familiarize-yourself-with-aci-troubleshooting-apic-gui-tools" title="Permanent link">&para;</a></h4>
<p>Fabric Inventory</p>
<p>System - Faults</p>
<p>System - Audit Logs</p>
<p>System - Events - Port Events</p>
<p>Operations Tab</p>
<p>​   Endpoint Tracker</p>
<h4 id="step-2-familiarize-yourself-with-aci-troubleshooting-apic-cli-tools">Step 2 - Familiarize yourself with ACI Troubleshooting APIC CLI tools<a class="headerlink" href="#step-2-familiarize-yourself-with-aci-troubleshooting-apic-cli-tools" title="Permanent link">&para;</a></h4>
<p>Many of the familiar NX-OS commands are available via the APIC CLI.  There are also ACI specific CLI commands with which you should become familiar.</p>
<p><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/cli/nxos/cr401/Cisco-APIC-NXOS-CLI-Command-Reference-401.html">Command Reference 4.0(1)</a></p>
<p>Command Overview</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>acidiag</td>
<td>ACI Diagnostic information Main command</td>
</tr>
<tr>
<td>moquery</td>
<td>Managed Object Store Browser CLI command</td>
</tr>
<tr>
<td>iping</td>
<td>The iping utility provides a version of ping that is "overlay aware" that can be used to test reachability from the fabric.</td>
</tr>
<tr>
<td>show</td>
<td>ACI specific show commands plus many of the familiar NX-OS show commands are supported.</td>
</tr>
<tr>
<td>icurl</td>
<td>Unauthenticated CLI command used to interact with a web page</td>
</tr>
<tr>
<td>mobrowser</td>
<td>CLI/Vim based ASCII "graphical" Managed Object Browser - <strong>Deprecated</strong><br />Use Visore or an ACI App</td>
</tr>
<tr>
<td>attach &amp; fabric</td>
<td>These commands are <strong>deprecated</strong> and should not be used but since they have such a history with ACI,  they warrant a mention.<br />Connect (SSH) to a leaf or spine on the fabric - Deprecated<br />SSH directly or via the APIC or use the fabric command from the APIC</td>
</tr>
</tbody>
</table>
<h5 id="step-21-overview-of-acidiag-command">Step 2.1 Overview of acidiag command<a class="headerlink" href="#step-21-overview-of-acidiag-command" title="Permanent link">&para;</a></h5>
<p>acidiag fnvread displays the fabric node vector (fnv) nodes in the fabric.  Notice the IP Address information. These are the VTEP IP addresses automatically assigned via DHCP by the APIC from the large block provided during APIC setup.
acidiag avread displays the appliance vector (av) (APIC) information. This command is particulary useful when troubleshooting APIC and APIC cluster issues.</p>
<h5 id="step-22-overview-of-moquery-command">Step 2.2 Overview of moquery command<a class="headerlink" href="#step-22-overview-of-moquery-command" title="Permanent link">&para;</a></h5>
<p>This command is discussed in detail further on in the Object Store Browser discussion.</p>
<h5 id="step-23-overview-of-iping-command">Step 2.3 Overview of iping command<a class="headerlink" href="#step-23-overview-of-iping-command" title="Permanent link">&para;</a></h5>
<p>The iping utility provides a version of ping that is "overlay aware" that can be used to test reachability from the fabric.</p>
<div class="codehilite"><pre><span></span><code>LEAF-1# iping -h

usage: iping     [ -d    set the SO_DEBUG option]
                 [ -D    enable debug information ]
                 [ -F    enable do not fragment bit in IP header ]
                 [ -L    receive packets on supplied interface ]
                 [ -n    enable printing host IP address than resolved name ]
                 [ -q    quiet output ]
                 [ -r    disable routing of the packets, send only to directly connected hosts ]
                 [ -v    output in verbose format ]
                 [ -V    &lt;vrf-name&gt;      name of the VRF through which destination is reachable ]
                 [ -c    &lt;count&gt;         no of packets to send ]
                 [ -i    &lt;wait&gt;                  no of seconds to wait before sending next packet ]
                 [ -p    &lt;pattern&gt;       packet payload pattern ]
                 [ -s    &lt;packetsize&gt;    size of packets to send ]
                 [ -t    &lt;timeout&gt;       wait for seconds to receive reply ]
                 [ -S    &lt;source ip/interface&gt;   send packet with given source-ip or IP of given interface and
                                                 send packet out of that interface ]
                 &lt;host&gt;  destination host-name or ip address
LEAF-1#
</code></pre></div>


<h5 id="step-24-overview-of-notable-show-commands">Step 2.4 Overview of notable show commands<a class="headerlink" href="#step-24-overview-of-notable-show-commands" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Command</th>
<th>Highlights</th>
</tr>
</thead>
<tbody>
<tr>
<td>show fabric membership</td>
<td>Show fabric leaf and spine switches with Serial Numbers, Node IDs, Name, Model, Role, IP and state information</td>
</tr>
<tr>
<td>version</td>
<td>Show APIC controller, leaf and spine switches with Node ID, Name, and Version.</td>
</tr>
<tr>
<td>show controller</td>
<td>Show controller information.  Good command to see  controller health, fabric IP, In band and out of band IPs (v4 and v6)</td>
</tr>
<tr>
<td>show tenant</td>
<td>Listing of all fabric tenants</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="step-25-overview-of-icurl-command">Step 2.5 Overview of icurl command<a class="headerlink" href="#step-25-overview-of-icurl-command" title="Permanent link">&para;</a></h5>
<p>The APIC controllers support the icurl command.  </p>
<p>This command is used for sending URL requests </p>
<h5 id="step-26-mention-of-the-mobrowser-command-now-deprecated">Step 2.6 Mention of the mobrowser command (now deprecated)<a class="headerlink" href="#step-26-mention-of-the-mobrowser-command-now-deprecated" title="Permanent link">&para;</a></h5>
<p>Enter ? for help.</p>
<p>To quit enter <strong>:quit</strong> (may need to enter twice) to exit the semi-graphical mode and quit the program</p>
<div class="codehilite"><pre><span></span><code>apic1# mobrowser
This command is being deprecated on APIC controller, please use NXOS-style equivalent command
</code></pre></div>


<p><img alt="09_mobrowser" src="../images/animations/09_mobrowser.gif" /></p>
<h5 id="step-27-mention-of-the-attach-and-fabric-commands-now-deprecated">Step 2.7 Mention of the attach and fabric commands (now deprecated)<a class="headerlink" href="#step-27-mention-of-the-attach-and-fabric-commands-now-deprecated" title="Permanent link">&para;</a></h5>
<p>The <strong>attach</strong> command provides a short cut to SSH to a specific fabric Node from within the fabric.</p>
<div class="codehilite"><pre><span></span><code>apic1# acidiag fnvread
      ID   Pod ID                 Name    Serial Number         IP Address    Role        State   LastUpdMsgId
--------------------------------------------------------------------------------------------------------------
     101        1              Spine-1      SAL1948TWWP      10.0.72.97/32   spine         active   0
     102        1               LEAF-1      SAL1948U33K      10.0.72.98/32    leaf         active   0
     103        1               LEAF-2      SAL1948U35D      10.0.72.96/32    leaf         active   0

Total 3 nodes

apic1# attach LEAF-1
This command is being deprecated on APIC controller, please use NXOS-style equivalent command
# Executing command: ssh LEAF-1 -b 10.0.0.1
Warning: Permanently added &#39;leaf-1,10.0.72.98&#39; (RSA) to the list of known hosts.

Password:
Cisco Nexus Operating System (NX-OS) Software
TAC support: http://www.cisco.com/tac
Copyright (c) 2002-2018, Cisco Systems, Inc. All rights reserved.
The copyrights to certain works contained in this software are
owned by other third parties and used and distributed under
license. Certain components of this software are licensed under
the GNU General Public License (GPL) version 2.0 or the GNU
Lesser General Public License (LGPL) Version 2.1. A copy of each
such license is available at
http://www.opensource.org/licenses/gpl-2.0.php and
http://www.opensource.org/licenses/lgpl-2.1.php
LEAF-1# exit
</code></pre></div>


<p>The fabric command provides a way to execute a show command on a node directly from the APIC.</p>
<div class="codehilite"><pre><span></span><code>apic1# fabric 102 show endpoint
----------------------------------------------------------------
 Node 102 (LEAF-1)
----------------------------------------------------------------
Legend:
 s - arp              H - vtep             V - vpc-attached     p - peer-aged

 R - peer-attached-rl B - bounce           S - static           M - span

 D - bounce-to-proxy  O - peer-attached    a - local-aged       m - svc-mgr

 L - local            E - shared-service
+-----------------------------------+---------------+-----------------+---------
-----+-------------+
      VLAN/                           Encap           MAC Address       MAC Info
/       Interface
      Domain                          VLAN            IP Address        IP Info
+-----------------------------------+---------------+-----------------+---------
-----+-------------+
overlay-1                                                  10.0.72.98 L
                lo0
overlay-1                                                  10.0.72.67 L
                lo1


apic1#
apic1# fabric 102 show version
----------------------------------------------------------------
 Node 102 (LEAF-1)
----------------------------------------------------------------
Cisco Nexus Operating System (NX-OS) Software
TAC support: http://www.cisco.com/tac
Documents: http://www.cisco.com/en/US/products/ps9372/tsd_products_support_serie
s_home.html
Copyright (c) 2002-2014, Cisco Systems, Inc. All rights reserved.
The copyrights to certain works contained in this software are
owned by other third parties and used and distributed under
license. Certain components of this software are licensed under
the GNU General Public License (GPL) version 2.0 or the GNU
Lesser General Public License (LGPL) Version 2.1. A copy of each
such license is available at
http://www.opensource.org/licenses/gpl-2.0.php and
http://www.opensource.org/licenses/lgpl-2.1.php

Software
  BIOS:      version 07.64
  kickstart: version 14.0(1h) [build 14.0(1h)]
  system:    version 14.0(1h) [build 14.0(1h)]
  PE:        version 4.0(1h)
  BIOS compile time:       05/16/2018
  kickstart image file is: /bootflash/aci-n9000-dk9.14.0.1h.bin
  kickstart compile time:  10/24/2018 03:13:58 [10/24/2018 03:13:58]
  system image file is:    /bootflash/auto-s
  system compile time:     10/24/2018 03:13:58 [10/24/2018 03:13:58]


Hardware
  cisco N9K-C9372PX-E (&quot;supervisor&quot;)
   Intel(R) Core(TM) i3- CPU @ 2.50GHz with 16267264 kB of memory.
  Processor Board ID SAL1948U33K

  Device name: LEAF-1
  bootflash:    62522368 kB

Kernel uptime is 102 day(s), 19 hour(s), 18 minute(s), 32 second(s)

Last reset at 814000 usecs after Fri May 08 23:49:44 2020 UTC
  Reason: reset-by-installer
  System version: 13.1(1)
  Service: Upgrade

plugin
  Core Plugin, Ethernet Plugin

apic1#
</code></pre></div>


<h4 id="step-3-explore-the-aci-object-store-browser-visore">Step 3 - Explore the ACI Object Store Browser (Visore)<a class="headerlink" href="#step-3-explore-the-aci-object-store-browser-visore" title="Permanent link">&para;</a></h4>
<p>We've stressed throughout these labs the important of understanding the Management Information Tree (MIT) and the relationships between objects.</p>
<p>Because this is so important, ACI comes with an HTML based Object Store Browser often referred to as  Visore.   It is available at https://<APIC IP or FQDN>/visore.html and the account that allows you to log in to the APIC can also be used to log in to Visore.</p>
<h5 id="step-31-log-in-to-visore-the-aci-object-store-browser">Step 3.1 - Log in to Visore , the ACI Object Store Browser<a class="headerlink" href="#step-31-log-in-to-visore-the-aci-object-store-browser" title="Permanent link">&para;</a></h5>
<p>The Object Store Browser or Visore can be access in two ways:</p>
<ul>
<li>directly via the URL to access the main screen</li>
<li>from within the GUI by right clicking on an object and selecting <strong>Open in Object Store Browser</strong> to access that specific object</li>
</ul>
<h6 id="direct-url">Direct URL<a class="headerlink" href="#direct-url" title="Permanent link">&para;</a></h6>
<p>Open a new Tab in your Google Chrome browser and connect to https://apic/visore.html.</p>
<p>Accept any security warnings and log in with the usual APIC credentials.</p>
<p>Examine the information on the opening page, which lists the fabricNode objects in the fabric. (APICs, Leafs, and Spines)</p>
<p><img alt="09_OpeningVisoreviaURL" src="../images/animations/09_OpeningVisoreviaURL.gif" /></p>
<h6 id="via-gui">Via GUI<a class="headerlink" href="#via-gui" title="Permanent link">&para;</a></h6>
<p>In some situations you want to find associations or the DN of a specific object.  It is possible to access VISORE directly from the APIC GUI for a specific object.</p>
<p><img alt="09_OpeningVisoreviaGUI" src="../images/animations/09_OpeningVisoreviaGUI.gif" /></p>
<h5 id="step-32-search-for-a-class">Step 3.2 - Search for a Class<a class="headerlink" href="#step-32-search-for-a-class" title="Permanent link">&para;</a></h5>
<p>Type the string <em>tenant</em> in the <strong>Class or DN:</strong> field.  In the dynamic drop down list you will see a list of all classes that contain the string <em>tenant</em>.  If you can't remember that the object class for a tenant is <strong>fvTenant</strong>, this is a handy way to find it.  Select the fvTenant class and click the <strong>Run Query</strong> button along with OK when prompted about searching for all instances of the class fvTenant.</p>
<p>Scrolll down to examine the results.  You should see the three default (out of the box) tenants (infra, mgmt, and common) and any additional tenants configured on the fabric including your own.</p>
<p>View the attributes or properties that come with an fvTenant Class object.  Note that one of the attributes or properties is <strong>name</strong>.</p>
<h5 id="step-33-search-objects-by-properties-attributes">Step 3.3 - Search Objects by Properties (Attributes)<a class="headerlink" href="#step-33-search-objects-by-properties-attributes" title="Permanent link">&para;</a></h5>
<p>Lets search for objects of Class type <strong>fvTenant</strong> with the property of <strong>name</strong> containing the string <em>POD</em>.</p>
<p>Note the different operators (op) you can use.  </p>
<h5 id="step-34-search-for-specific-objects-by-distinguished-name-dn">Step 3.4 - Search for specific objects by Distinguished Name (DN)<a class="headerlink" href="#step-34-search-for-specific-objects-by-distinguished-name-dn" title="Permanent link">&para;</a></h5>
<p>Take note of the dn of one of the Tenants.  It will be something like <em>uni/tn-POD11-Tenant</em> or <em>uni/tn-common</em>.  Enter the dn in the  <strong>Class or DN:</strong> field and click the <strong>Run Query</strong> button.  You will find the tenant and its attributes again but this time by querying for it by specific name (DN).</p>
<h5 id="step-35-search-for-specific-objects-by-uid">Step 3.5 - Search for specific objects by UID<a class="headerlink" href="#step-35-search-for-specific-objects-by-uid" title="Permanent link">&para;</a></h5>
<p>Take note of your tenants uid.  Now search for an object of class fvTenant with a property equal to the uid.</p>
<h5 id="step-36-drill-down-the-object-tree">Step 3.6 - Drill down the Object Tree<a class="headerlink" href="#step-36-drill-down-the-object-tree" title="Permanent link">&para;</a></h5>
<p>From your tenant, note the arrow icons (&lt; &gt;) next to the DN. These allow you drill into children objects and back up to parent objects.</p>
<h4 id="step-4-explore-the-cli-based-aci-object-store-browser">Step 4 - Explore the CLI based ACI Object Store Browser<a class="headerlink" href="#step-4-explore-the-cli-based-aci-object-store-browser" title="Permanent link">&para;</a></h4>
<p>The ACI Object Store Browser has a CLI equivalent via the <strong>moquery</strong> command.</p>
<h5 id="step-41-ssh-to-apic-and-explore-the-moquery-command">Step 4.1 - SSH to APIC and explore the moquery command<a class="headerlink" href="#step-41-ssh-to-apic-and-explore-the-moquery-command" title="Permanent link">&para;</a></h5>
<p>Once you are at the command line of the APIC, first type in moquery with the -h option for "help" on the command.</p>
<p>You can also view the Linux manual or "man" pages.</p>
<div class="codehilite"><pre><span></span><code>apic1# moquery -h
usage: Command line cousin to visore [-h] [-i HOST] [-p PORT] [-d DN]
                                     [-c KLASS] [-f FILTER] [-a ATTRS]
                                     [-o OUTPUT] [-u USER]
                                     [-x [OPTIONS [OPTIONS ...]]]

optional arguments:
  -h, --help            show this help message and exit
  -i HOST, --host HOST  Hostname or ip of apic
  -p PORT, --port PORT  REST server port
  -d DN, --dn DN        dn of the mo
  -c KLASS, --klass KLASS
                        comma seperated class names to query
  -f FILTER, --filter FILTER
                        property filter to accept/reject mos
  -a ATTRS, --attrs ATTRS
                        type of attributes to display (config, all)
  -o OUTPUT, --output OUTPUT
                        Display format (block, table, xml, json)
  -u USER, --user USER  User name
  -x [OPTIONS [OPTIONS ...]], --options [OPTIONS [OPTIONS ...]]
                        Extra options to the query
apic1#
</code></pre></div>


<p>Tip: Press spacebar to continue the output and the letter q to Quit out of the man (Unix Manual) page.</p>
<div class="codehilite"><pre><span></span><code>apic1# man moquery
This command is being deprecated on APIC controller, please use NXOS-style equivalent command
man(8)                              moquery                             man(8)

NAME
       moquery -- search for MO

SYNOPSIS
       moquery  --help  --host hostname --port portname --dn dn --klass class-
       name --filter property --attrs attributes --output output --user  user-
       name --options options

DESCRIPTION
       Searches  for  managed  objects (MOs) within the management information
       tree (MIT).

       -h, --help
       Displays usage information.

       -i, --host
       Specifies an APIC host.

       hostname
              The hostname or IP address of an APIC.

       -p, --port
       Specifies a port for a REST interface.

       portname
              The REST interface port number.

       -d, --dn
       Specifies a distinguished name (DN) for a managed object (MO).

       dn
              The DN of an MO.

       -c, --klass
       Specifies a class name for the query.
 Manual page moquery.man line 1 (press h for help or q to quit)
</code></pre></div>


<p>We wil execute the same searches we ran via the Visore page.</p>
<p>Tip:  The CLI can be lengthy so some familiarity with the grep (Global Regular Expression Print) command and its extensions can be useful.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>grep</td>
<td>Grep is the most common way to search on a Unikx based system.<br />Without switches, grep only supports basic regular expressions and more advanced searches using meta-characters are not interpreted unless thay are blackslashed.  For example if you want to match on one or more whitespace characters in regexp you use \s+ <br />apic1# moquery -c fvTenant | grep 'dn\s\+:'</td>
</tr>
<tr>
<td>grep -E, --extended-regexp</td>
<td>With the -E switch, you can use extended regular expressions in your search natively (without having to escape characters).<br />Some systems, including the APIC, may recognize egrep which is equivalent to grep -E.<br />apic1# moquery -c fvTenant | grep -E 'dn\s+:'</td>
</tr>
<tr>
<td>-F, --fixed-strings</td>
<td>With the -F switch, can search for exact (fixed) test very fast</td>
</tr>
</tbody>
</table>
<p>Remember that Unix/Linux is case sensitive so grep -e and grep -E are not the same!</p>
<p>grep examples</p>
<div class="codehilite"><pre><span></span><code># Notice that we get any attribute that has &quot;name&quot; in in.
apic1# moquery -c fvTenant | grep name
name         : common
nameAlias    :
name         : mgmt
nameAlias    :
name         : infra
nameAlias    :
name         : POD11_Tenant
nameAlias    :
apic1#
# With the Extended option I can search with a regular expression for lines which
# begin with name, have some spaces, and then a :
apic1# moquery -c fvTenant | grep -E &#39;^name\s+:&#39;
name         : common
name         : mgmt
name         : infra
name         : POD11_Tenant

# Same as above but using egrep (grep -E is preferred)
apic1# moquery -c fvTenant | egrep &#39;name\s+:&#39;
name         : common
name         : mgmt
name         : infra
name         : POD11_Tenant

# Similar search with the -F fixed option
apic1# moquery -c fvTenant | grep -F name
name         : common
nameAlias    :
name         : mgmt
nameAlias    :
name         : infra
nameAlias    :
name         : POD11_Tenant
nameAlias    :
apic1#

# Same as above but using fgrep (grep -F is preferred)
apic1# moquery -c fvTenant | fgrep name
name         : common
nameAlias    :
name         : mgmt
nameAlias    :
name         : infra
nameAlias    :
name         : POD11_Tenant
nameAlias    :
apic1#
</code></pre></div>


<p>Tip:  The moquery command supports a variety of output formats with the <strong>-o</strong> switch.</p>
<table>
<thead>
<tr>
<th>moquery format switch options</th>
<th>Output Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-o table</td>
<td>Displays output or subset of output (when supported) in a table format</td>
</tr>
<tr>
<td>-o xml</td>
<td>Displays output in XML</td>
</tr>
<tr>
<td>-o json</td>
<td>Displays output in JSON</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h6 id="output-example">Output Example<a class="headerlink" href="#output-example" title="Permanent link">&para;</a></h6>
<p>Tip: Pipe (the | symbol) the output of your moquery command to "more" so you can page through the output (any key advances and the letter q quits)</p>
<div class="codehilite"><pre><span></span><code>apic1# moquery -c fvCtx -o json | more
{
  &quot;imdata&quot;: [
    {
      &quot;fvCtx&quot;: {
        &quot;attributes&quot;: {
          &quot;dn&quot;: &quot;uni/tn-common/ctx-copy&quot;,
          &quot;uid&quot;: &quot;0&quot;,
          &quot;extMngdBy&quot;: &quot;&quot;,
          &quot;pcEnfDir&quot;: &quot;ingress&quot;,
          &quot;seg&quot;: &quot;2490368&quot;,
          &quot;descr&quot;: &quot;&quot;,
          &quot;monPolDn&quot;: &quot;uni/tn-common/monepg-default&quot;,
          &quot;modTs&quot;: &quot;2020-05-08T22:59:38.099+00:00&quot;,
          &quot;scope&quot;: &quot;2490368&quot;,
          &quot;rn&quot;: &quot;ctx-copy&quot;,
          &quot;childAction&quot;: &quot;&quot;,
          &quot;pcEnfPref&quot;: &quot;enforced&quot;,
          &quot;status&quot;: &quot;&quot;,
          &quot;nameAlias&quot;: &quot;&quot;,
          &quot;pcEnfDirUpdated&quot;: &quot;yes&quot;,
          &quot;ipDataPlaneLearning&quot;: &quot;enabled&quot;,
          &quot;ownerTag&quot;: &quot;&quot;,
          &quot;annotation&quot;: &quot;&quot;,
--More--
</code></pre></div>


<h5 id="step-32-search-for-a-class_1">Step 3.2 - Search for a Class<a class="headerlink" href="#step-32-search-for-a-class_1" title="Permanent link">&para;</a></h5>
<p>Lets find all the Tenants configured in the fabric.</p>
<div class="codehilite"><pre><span></span><code>apic1# moquery -c fvTenant
</code></pre></div>


<p><img alt="09_moquery_fvTenant" src="D:\Dropbox (Indigo Wire Networks)\scripts\training\2020\aci4_labguide\docs\images\animations\09_moquery_fvTenant.gif" /></p>
<h5 id="step-33-search-objects-by-properties-attributes_1">Step 3.3 - Search Objects by Properties (Attributes)<a class="headerlink" href="#step-33-search-objects-by-properties-attributes_1" title="Permanent link">&para;</a></h5>
<p>Lets search for objects of Class type <strong>fvTenant</strong> with the property of <strong>name</strong> containing the string <em>POD</em>.</p>
<p>Note: This can be done with grep command as well but in this example we will use the -f filter moquery option.</p>
<div class="codehilite"><pre><span></span><code>apic1# moquery -c fvTenant -f &#39;fv.Tenant.name*&quot;POD&quot;&#39;
Total Objects shown: 1

# fv.Tenant
name         : POD11_Tenant
annotation   :
childAction  :
descr        :
dn           : uni/tn-POD11_Tenant
extMngdBy    :
lcOwn        : local
modTs        : 2020-07-23T22:58:17.136+00:00
monPolDn     : uni/tn-common/monepg-default
nameAlias    :
ownerKey     :
ownerTag     :
rn           : tn-POD11_Tenant
status       :
uid          : 15374

apic1#


apic1# moquery -c fvTenant -f &#39;fv.Tenant.name==&quot;mgmt&quot;&#39;
Total Objects shown: 1

# fv.Tenant
name         : mgmt
annotation   :
childAction  :
descr        :
dn           : uni/tn-mgmt
extMngdBy    :
lcOwn        : local
modTs        : 2020-05-08T22:59:36.566+00:00
monPolDn     : uni/tn-common/monepg-default
nameAlias    :
ownerKey     :
ownerTag     :
rn           : tn-mgmt
status       :
uid          : 0

apic1#
</code></pre></div>


<h5 id="step-34-search-for-specific-objects-br-distinguished-name-dn">Step 3.4 - Search for specific objects br Distinguished Name (DN)<a class="headerlink" href="#step-34-search-for-specific-objects-br-distinguished-name-dn" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code>apic1# moquery -d uni/tn-mgmt
Total Objects shown: 1

# fv.Tenant
name         : mgmt
annotation   :
childAction  :
descr        :
dn           : uni/tn-mgmt
extMngdBy    :
lcOwn        : local
modTs        : 2020-05-08T22:59:36.566+00:00
monPolDn     : uni/tn-common/monepg-default
nameAlias    :
ownerKey     :
ownerTag     :
rn           : tn-mgmt
status       :
uid          : 0

apic1#
</code></pre></div>


<h5 id="step-35-search-for-specific-objects-by-uid_1">Step 3.5 - Search for specific objects by UID<a class="headerlink" href="#step-35-search-for-specific-objects-by-uid_1" title="Permanent link">&para;</a></h5>
<p>Take note of your tenants uid.  Now search for an object of class fvTenant with a property equal to the uid.</p>
<div class="codehilite"><pre><span></span><code>apic1# moquery -c fvTenant -f &#39;fv.Tenant.uid==&quot;15374&quot;&#39;
Total Objects shown: 1

# fv.Tenant
name         : POD11_Tenant
annotation   :
childAction  :
descr        :
dn           : uni/tn-POD11_Tenant
extMngdBy    :
lcOwn        : local
modTs        : 2020-07-23T22:58:17.136+00:00
monPolDn     : uni/tn-common/monepg-default
nameAlias    :
ownerKey     :
ownerTag     :
rn           : tn-POD11_Tenant
status       :
uid          : 15374

apic1#
</code></pre></div>


<h2 id="reference-information">Reference Information<a class="headerlink" href="#reference-information" title="Permanent link">&para;</a></h2>
<p><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/cli/nxos/cr401/Cisco-APIC-NXOS-CLI-Command-Reference-401.html">Command Reference 4.0(1)</a></p>
<p><a href="https://www.cisco.com/c/dam/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/troubleshooting/Cisco_TroubleshootingApplicationCentricInfrastructureSecondEdition.pdf">ACI Troubleshooting Second Edition</a></p>
<p><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/troubleshooting/Cisco-APIC-Troubleshooting-Guide-401.html">Cisco APIC Troubleshooting Guide</a> 4.0(1)</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../08_lab_fwl_integration/" title="Lab 08 - Firewall Integration" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lab 08 - Firewall Integration
              </div>
            </div>
          </a>
        
        
          <a href="../10_lab_programmability/" title="Lab 10 - Programmability" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Lab 10 - Programmability
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/squidfunk" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/squidfunk" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://linkedin.com/in/squidfunk" target="_blank" rel="noopener" title="linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>